





function loadCss(url){
	var link = document.createElement("link");
	link.setAttribute("rel","stylesheet");
	link.setAttribute("type","text/css");
	link.setAttribute("href",url);
	document.getElementsByTagName("head")[0].appendChild(link);
}
function loadCssUrls(baseUrl){
loadCss(baseUrl + "vendor/editor/assets/css/bootstrap.min.css");
loadCss(baseUrl + "vendor/editor/assets/css/bootstrap-responsive.min.css");
loadCss(baseUrl + "vendor/editor/assets/css/animate.min.css");
loadCss(baseUrl + "vendor/editor/assets/css/style.css");
loadCss(baseUrl + "vendor/editor/assets/css/style.css");
loadCss(baseUrl + "vendor/editor/assets/css/jquery.fancybox-1.3.4.css");
loadCss(baseUrl + "vendor/editor/assets/css/font-awesome.min.css");
loadCss(baseUrl + "vendor/editor/assets/css/prettyPhoto.css");
}
// Handles message from ResponsiveFilemanager
//
function OnMessage(e) {
	var event = e.originalEvent;
	// Make sure the sender of the event is trusted
	if (event.data.sender === 'responsivefilemanager') {
		if (event.data.field_id) {
			var fieldID = event.data.field_id;
			var url = event.data.url;

			$('#' + fieldID).val(url).trigger('change');
			//$.fancybox.close();
			console.log(Core9);

			Core9.parent.send({
				url : url,
				myparam : 'Trying again...'
			});

			// Delete handler of the message from ResponsiveFilemanager
			$(window).off('message', OnMessage);
		}
	}
}

function  initMyPage(baseUrl){

	loadCssUrls(baseUrl);

jQuery(document).ready(function($) {


			$('.iframe-btn').fancybox({
				'width' : 880,
				'height' : 570,
				'type' : 'iframe',
				'autoScale' : false
			});


			$('#fancybox-close').on('click', function(){
				Core9.parent.send({
					url : 'no url chosen',
					myparam : 'Trying again...'
				});
			});

			// Handler for a message from ResponsiveFilemanager
			$('.iframe-btn').on('click', function(e) {
				e.preventDefault();
				$(window).on('message', OnMessage);

			});

		});

}

initMyPage(baseUrl);